# Warning: there won't be any resource requests/limits for any Tempo-related container
---
fullnameOverride: tempo

serviceAccount: # There is no way to set an account per component
  create: true
  name: tempo-sa

search:
  enabled: true

tempo:
  structuredConfig:
    usage_report:
      reporting_enabled: false

multitenancyEnabled: true

traces:
  otlp:
    grpc:
      enabled: true

global_overrides:
  metrics_generator_processors:
  - service-graphs
  - span-metrics

gateway:
  enabled: false

minio:
  enabled: false

distributor:
  replicas: 2

queryFrontend:
  replicas: 2

querier:
  replicas: 3

metricsGenerator:
  enabled: true
  replicas: 2
  config:
    processor:
      service_graphs:
        dimensions:
        - user
      span_metrics:
        dimensions:
        - user
    storage:
      remote_write:
      - url: http://mimir-distributor.mimir.svc:8080/api/v1/push
        send_exemplars: true
        headers:
          X-Scope-OrgID: _local

memcached:
  replicas: 2

storage:
  trace:
    backend: s3
    s3:
      endpoint: minio.storage.svc:9000
      bucket: tempo-data
      access_key: remote_user
      secret_key: R3m0t3us3r
      insecure: true
      forcepathstyle: true

metaMonitoring:
  serviceMonitor:
    enabled: true
    labels:
      release: monitor

prometheusRule:
  enabled: true
  labels:
    release: monitor
